name: Prepare Build Artifacts
description: Downloads all artifacts, copies WASM files, builds JavaScript, and moves artifacts
runs:
  using: composite
  steps:
    - name: Download all artifacts
      uses: actions/download-artifact@37930b1c2abaa49bbe596cd826c3c89aef350131 # v7.0.0
      with:
        path: artifacts
    - name: Copy WASM files
      shell: bash
      run: cp -R artifacts/bindings-wasm/wasm .
    - name: Build JavaScript
      shell: bash
      run: npm run build:cjs && cp artifacts/*/*.node dist/ && npm run build:bootstrap
    - name: Move artifacts
      shell: bash
      run: npm run ci:artifacts

